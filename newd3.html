<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<div id="drawArea"></div>




<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.0/d3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script type="text/javascript">

// Create a svg canvas
var svg = d3.select("#drawArea")
  .append("svg")
  .attr("width", 1000)
  .attr("height", 1000);

//Drag nodes
var drag = d3.behavior.drag()
  .on("dragstart", function() {
    d3.event.sourceEvent.stopPropagation()
  })
  .on("drag", dragmove);
  // line 

var line = svg.append("line")
  .style("stroke", "black")
  .attr("x1", 150)
  .attr("y1", 100)
  .attr("x2", 222)
  .attr("y2", 333)
  
  var line = svg.append("line")
  .style("stroke", "black")
  .attr("x3", 350 )
  .attr("y3",400)
  .attr("x4", 553)
  .attr("y4",421);
   
//First node
var g1 = svg.append("g")
.attr("transform", "translate(" + 150 + "," + 100 + ")")
  .attr("class", "first")
 
  .append("circle").attr({
    r: 10,
  })
  .style("fill", "#F00")

//Second node
var g2 = svg.append("g")
  .attr("transform", "translate(" + 250 + "," + 300 + ")")
  .attr("class", "second")
  
  .append("circle").attr({
    r: 10,
  })
  .style("fill", "#00F")
var g3 = svg.append("g")
  .attr("transform", "translate(" + 350 + "," + 400 + ")")
  .attr("class", "third")
 
  .append("circle").attr({
    r: 10,
  })
  .style("fill", "#00F")
  var g4 = svg.append("g")
  .attr("transform", "translate(" + 553 + "," + 763 + ")")
  .attr("class", "fourth")
  
  .append("circle").attr({
    r: 10,
  })
  .style("fill", "#00F")


//Drag handler
function dragmove(d) {
  var x = d3.event.x;
  var y = d3.event.y;
  d3.select(this).attr("transform", "translate(" + x + "," + y + ")");
  if(d3.select(this).attr("class") == "first") {
    line.attr("x1", x);
    line.attr("y1", y);
  } else {
    line.attr("x2", x);
    line.attr("y2", y);
  }
}





</script>
</body>
</html>